var almSinglePosts={};(function(){almSinglePosts.onload=function(){almSinglePosts.init=true;almSinglePosts.timer=null;almSinglePosts.initPageTitle=document.title;almSinglePosts.titleTemplate='';almSinglePosts.pageview=true;almSinglePosts.animating=false;almSinglePosts.scroll=true;almSinglePosts.offset=30;almSinglePosts.popstate=false;almSinglePosts.is_disqus=false;almSinglePosts.active=true;almSinglePosts.first=document.querySelector('.alm-single-post');almSinglePosts.isIE=(navigator.appVersion.indexOf("MSIE 10")!==-1)?true:false;};if(document.querySelector('.alm-single-post')){almSinglePosts.onload();}
almSinglePosts.onScroll=function(){var scrollTop=window.pageYOffset;if(almSinglePosts.active&&!almSinglePosts.popstate&&scrollTop>1){almSinglePosts.timer=window.setTimeout(function(){var fromTop=scrollTop+almSinglePosts.offset;var posts=document.querySelectorAll('.alm-single-post');var url=window.location.href;var current=Array.prototype.filter.call(posts,function(n,i){if(typeof ajaxloadmore.getOffset==='function'){var divOffset=ajaxloadmore.getOffset(n);if(divOffset.top<fromTop){return n;}}});var currentPost=current[current.length-1];var id=(currentPost)?currentPost.dataset.id:undefined;var permalink=(currentPost)?currentPost.dataset.url:'';var title=(currentPost)?currentPost.dataset.title:'';var page=(currentPost)?currentPost.dataset.page:'';if(id===undefined){id=almSinglePosts.first.dataset.id;permalink=almSinglePosts.first.dataset.url;title=almSinglePosts.first.dataset.title;}
if(url!==permalink){almSinglePosts.setURL(id,permalink,title,page);}},15);}};window.addEventListener('touchstart',almSinglePosts.onScroll);window.addEventListener('scroll',almSinglePosts.onScroll);window.almSetSinglePost=function(alm,id,permalink,title){almSinglePosts.titleTemplate=alm.addons.single_post_title_template;if(almSinglePosts.init){almSinglePosts.siteTitle=alm.addons.single_post_siteTitle;almSinglePosts.siteTagline=alm.addons.single_post_siteTagline;almSinglePosts.pageview=alm.addons.single_post_pageview;almSinglePosts.scroll=alm.addons.single_post_scroll;almSinglePosts.offset=parseInt(alm.addons.single_post_scroll_top);almSinglePosts.controls=alm.addons.single_post_controls;almSinglePosts.controls=(almSinglePosts.controls==='1')?true:false;almSinglePosts.scroll=(almSinglePosts.scroll==='true')?true:false;}
if(almSinglePosts.scroll&&!almSinglePosts.init){almSinglePosts.scrollToPost(id);}
almSinglePosts.init=false;};almSinglePosts.onpopstate=function(event){if(!almSinglePosts.init&&almSinglePosts.active){almSinglePosts.popstate=true;var id;if(event.state){id=event.state.postID;almSinglePosts.setPageTitle(event.state.title);}else{id=almSinglePosts.first.dataset.id;document.title=almSinglePosts.initPageTitle;}
almSinglePosts.popstate=true;almSinglePosts.scrollToPost(id);}};window.addEventListener('popstate',function(event){if(typeof window.history.pushState=='function'){var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;document.body.scrollTop=scrollTop;almSinglePosts.onpopstate(event);}});almSinglePosts.setURL=function(id,permalink,title,page){var state={postID:id,permalink:permalink,title:title};if(typeof window.history.pushState==='function'&&!almSinglePosts.isIE){almSinglePosts.setPageTitle(title);if(almSinglePosts.controls){history.pushState(state,title,permalink);}else{history.replaceState(state,title,permalink);}
if(typeof almUrlUpdate==='function'){window.almUrlUpdate(permalink,'single-post');}}
if(almSinglePosts.is_disqus){almSinglePosts.disqusLoad(id,permalink,title,page);}
if(almSinglePosts.pageview==='true'){var path='/'+window.location.pathname;if(typeof ajaxloadmore.tracking==='function'){ajaxloadmore.tracking(path);}else{if(typeof gtag==='function'){gtag('event','page_view',{'page_path':path});}
if(typeof ga==='function'){ga('send','pageview',path);}
if(typeof __gaTracker==='function'){__gaTracker('send','pageview',path);}}}};almSinglePosts.scrollToPost=function(id){var target=document.querySelector('.alm-reveal.alm-single-post.post-'+id);if(target){target=(target.hasChildNodes())?target:document.querySelector('body');var offset=(typeof ajaxloadmore.getOffset==='function')?ajaxloadmore.getOffset(target).top:target.offsetTop;var top=offset-almSinglePosts.offset+1;if(!top){return false;}
if(almSinglePosts.popstate){setTimeout(function(){window.scrollTo(0,top);},5);}else{if(typeof ajaxloadmore.almScroll==='function'){ajaxloadmore.almScroll(top);}else{window.scrollTo({top:top,behavior:'smooth'});}}
setTimeout(function(){almSinglePosts.popstate=false;},250);}};almSinglePosts.setPageTitle=function(title){if(almSinglePosts.titleTemplate===''){document.title=document.title;}else{var str=almSinglePosts.titleTemplate;str=str.replace('{site-title}',almSinglePosts.siteTitle);str=str.replace('{tagline}',almSinglePosts.siteTagline);str=str.replace('{post-title}',title);document.title=str;}};almSinglePosts.disqusInit=function(disqus_container){var disqus_shortname=disqus_container.dataset.disqusShortname;if(disqus_shortname){var disqus=document.createElement('div');disqus.id='disqus_thread';disqus_container.appendChild(disqus);var file=document.createElement('script');file.setAttribute('type','text/javascript');file.setAttribute('src','//'+disqus_shortname+'.disqus.com/embed.js');document.getElementsByTagName("body")[0].appendChild(file);almSinglePosts.is_disqus=true;}};if(document.querySelector('.alm-single-post .alm-disqus')){almSinglePosts.disqusInit(document.querySelector('.alm-single-post .alm-disqus'));}
almSinglePosts.disqusLoad=function(id,permalink,title,page){var disqus_thread=document.getElementById('disqus_thread');if(disqus_thread){var parent=disqus_thread.parentNode,height=parent.offsetHeight;parent.style.minHeight=height+'px';disqus_thread.style.display='none';var target=document.querySelectorAll('.alm-single-post .alm-disqus').item(parseInt(page));if(target){target.appendChild(disqus_thread).style.display='block';}
DISQUS.reset({reload:true,config:function(){this.page.identifier=id+' '+permalink;this.page.url=permalink;this.page.title=title;}});}};})();